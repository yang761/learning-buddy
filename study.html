<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸŒ¸ å­¸ç¿’å°å¤¥ä¼´ Pro ğŸŒ¸</title>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body{
    font-family:"Microsoft JhengHei", "Noto Sans TC", sans-serif;
    background:linear-gradient(135deg,#ffd6e0,#fff3b0,#d0f4de);
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    padding:20px;
}

.card{
    background:white;
    padding:30px 20px;
    border-radius:25px;
    width:100%;
    max-width:450px;
    text-align:center;
    box-shadow:0 15px 35px rgba(0,0,0,0.15);
    position: relative;
}

.animal{
    font-size:80px;
    cursor:pointer;
    transition:all 0.3s ease;
    display:inline-block;
}
.animal:hover{
    transform:scale(1.15) rotate(5deg);
    filter: drop-shadow(0 5px 8px rgba(255,111,145,0.3));
}

.timer{
    font-size:48px;
    margin:15px 0;
    color:#ff6f91;
    font-weight:bold;
    font-family: 'Courier New', monospace;
}

button{
    margin:4px;
    padding:8px 12px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    transition:all 0.2s ease;
    font-family:"Microsoft JhengHei", sans-serif;
}

button:hover{
    opacity:0.9;
    transform:translateY(-2px);
}

button:active{
    transform:translateY(0);
}

.small-btn{
    background:#e0fbfc;
    font-size:12px;
    color:#2d3142;
}

.start{background:#a0e7e5; color:#2d3142;}
.pause{background:#ffc8dd; color:#2d3142;}
.end{background:#ff8fab; color:white;}
.reset{background:#bdb2ff; color:#2d3142;}

button:disabled{
    opacity:0.5;
    cursor:not-allowed;
    transform:none !important;
}

.history{
    margin-top:10px;
    background:#f9f9f9;
    padding:10px;
    border-radius:10px;
    max-height:130px;
    overflow-y:auto;
    font-size:13px;
    text-align:left;
    border:1px solid #f0f0f0;
}

.history::-webkit-scrollbar{
    width:6px;
}
.history::-webkit-scrollbar-thumb{
    background:#ffc8dd;
    border-radius:3px;
}

.total{
    margin-top:8px;
    font-weight:bold;
    color:#ff6f91;
}

.message{
    min-height:30px;
    color:#4a4e69;
    font-size:15px;
    margin:10px 0;
}

.clear-history{
    margin-top:8px;
    font-size:12px;
    background:#f8edeb;
    color:#9a8c98;
    padding:4px 8px;
}

.toast {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #ff8fab;
    color: white;
    padding: 6px 12px;
    border-radius:8px;
    font-size:12px;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.toast.show {
    opacity: 1;
}
</style>
</head>
<body>

<div class="card">
    <h2>ğŸŒ¸ å­¸ç¿’å°å¤¥ä¼´ ğŸŒ¸</h2>
    <div class="animal" onclick="changeAnimal()" id="animal">ğŸ°</div>
    <div class="message" id="message"></div>
    <div class="timer" id="timer">00:00:00</div>

    <div>
        <button class="small-btn" onclick="addTime(3600)">+1å°æ™‚</button>
        <button class="small-btn" onclick="addTime(600)">+10åˆ†é˜</button>
        <button class="small-btn" onclick="addTime(60)">+1åˆ†é˜</button>
        <button class="small-btn" onclick="addTime(10)">+10ç§’</button>
        <button class="small-btn" onclick="addTime(1)">+1ç§’</button>
    </div>

    <div style="margin:15px 0;">
        <button class="start" onclick="startTimer()" id="startBtn">é–‹å§‹</button>
        <button class="pause" onclick="pauseTimer()" id="pauseBtn" disabled>æš«åœ</button>
        <button class="end" onclick="endSession()" id="endBtn" disabled>çµæŸ</button>
        <button class="reset" onclick="resetTimer()">é‡è¨­</button>
    </div>

    <div class="total" id="totalTime"></div>
    <button class="clear-history" onclick="clearHistory()">æ¸…ç©ºå­¸ç¿’ç´€éŒ„</button>
    <div class="history" id="history"></div>
    <div class="toast" id="toast"></div>
</div>

<script>
// ä¸€é–‹å§‹å¾ 0 é–‹å§‹ï¼Œè‡ªå·±åŠ æ™‚é–“å¾Œå€’æ•¸
let targetSeconds = 0;    // ä½ è¨­å®šçš„ç¸½å€’æ•¸æ™‚é–“
let timeLeft = 0;        // å‰©ä¸‹å¤šå°‘ç§’
let countdown = null;
let isRunning = false;
let totalSeconds = parseInt(localStorage.getItem("totalSeconds")) || 0;

const animals = ["ğŸ°","ğŸ±","ğŸ»","ğŸ¶","ğŸ¦Š","ğŸ¼","ğŸ¯","ğŸ¨","ğŸ¸","ğŸ¹","ğŸ®","ğŸ·"];
const messages = [
    "æ…¢æ…¢ä¾†ä¹Ÿæ²’é—œä¿‚ ğŸ’›","ä»Šå¤©ä¹Ÿåœ¨é€²æ­¥ï¼","ä½ çœŸçš„å¾ˆåŠªåŠ›è€¶ï¼","å°ˆå¿ƒä¸€ä¸‹ä¸‹å°±å¥½ âœ¨",
    "æœªä¾†æœƒæ„Ÿè¬ç¾åœ¨çš„ä½ ã€‚","è¾›è‹¦äº†ï¼Œæˆ‘é™ªä½ ã€‚","å …æŒå°±æ˜¯å‹åˆ© ğŸ’ª",
    "å°å°çš„ç´¯ï¼Œå¤§å¤§çš„æ”¶ç©«ï½","ä½ è¶…æ£’çš„ï¼ç¹¼çºŒåŠ æ²¹ âœ¨","ä¼‘æ¯æ˜¯ç‚ºäº†èµ°æ›´é•·çš„è·¯ï½"
];

function formatTime(sec) {
    if (isNaN(sec) || sec < 0) sec = 0;
    const h = Math.floor(sec / 3600);
    const m = Math.floor((sec % 3600) / 60);
    const s = sec % 60;
    return [h, m, s].map(num => String(num).padStart(2, '0')).join(':');
}

function updateDisplay() {
    document.getElementById("timer").textContent = formatTime(timeLeft);
    document.getElementById("startBtn").disabled = isRunning || timeLeft <= 0;
    document.getElementById("pauseBtn").disabled = !isRunning;
    document.getElementById("endBtn").disabled = !isRunning;
}

// åŠ æ™‚æ•¸ï¼šå¾ 0 å¾€ä¸ŠåŠ ï¼Œä½œç‚ºå€’æ•¸ç›®æ¨™
function addTime(sec) {
    if (isRunning) return;
    targetSeconds += sec;
    timeLeft = targetSeconds;
    updateDisplay();
    showToast(`å·²å¢åŠ  ${formatTime(sec)}`);
}

// é–‹å§‹å€’æ•¸
function startTimer() {
    if (isRunning || timeLeft <= 0) return;
    isRunning = true;
    updateDisplay();
    showToast("é–‹å§‹å€’æ•¸ï½ğŸ’ª");

    countdown = setInterval(() => {
        timeLeft--;
        updateDisplay();
        if (timeLeft <= 0) {
            endSession();
            showToast("æ™‚é–“åˆ°ï¼çœŸæ£’ï½ğŸ‰");
        }
    }, 1000);
}

// æš«åœå€’æ•¸
function pauseTimer() {
    clearInterval(countdown);
    isRunning = false;
    updateDisplay();
    showToast("å·²æš«åœ â¸ï¸");
}

// é‡è¨­å› 00:00:00
function resetTimer() {
    clearInterval(countdown);
    isRunning = false;
    targetSeconds = 0;
    timeLeft = 0;
    updateDisplay();
    showToast("å·²é‡è¨­æ­¸é›¶ â±ï¸");
}

// çµæŸä¸¦è¨˜éŒ„
function endSession() {
    clearInterval(countdown);
    isRunning = false;

    const used = targetSeconds - timeLeft;
    const realUsed = used > 0 ? used : 0;

    if (realUsed > 0) {
        saveRecord(realUsed);
        showToast(`æœ¬æ¬¡å­¸ç¿’ ${formatTime(realUsed)}ï¼Œè¶…æ£’ï¼âœ¨`);
    } else {
        showToast("è«‹å…ˆè¨­å®šæ™‚é–“ä¸¦é–‹å§‹å“¦ï½ğŸ˜œ");
    }

    resetTimer();
}

// å„²å­˜ç´€éŒ„
function saveRecord(seconds) {
    totalSeconds += seconds;
    localStorage.setItem("totalSeconds", totalSeconds);

    let history = localStorage.getItem("history") || "";
    const now = new Date().toLocaleString("zh-TW");
    const newRecord = `${now} - ${formatTime(seconds)}<br>`;
    history = newRecord + history;
    localStorage.setItem("history", history);

    loadData();
    changeAnimal();
}

function changeAnimal() {
    const randomAnimal = animals[Math.floor(Math.random() * animals.length)];
    const randomMessage = messages[Math.floor(Math.random() * messages.length)];
    document.getElementById("animal").textContent = randomAnimal;
    document.getElementById("message").textContent = randomMessage;
}

function loadData() {
    document.getElementById("totalTime").textContent =
        `ğŸŒŸ ç¸½å­¸ç¿’æ™‚é•·ï¼š${formatTime(totalSeconds)}`;
    const historyContent = localStorage.getItem("history") || "é‚„æ²’æœ‰å­¸ç¿’ç´€éŒ„å“¦ï½ğŸ’–";
    document.getElementById("history").innerHTML =
        `<strong>ğŸ“œ å­¸ç¿’ç´€éŒ„ï¼š</strong><br>${historyContent}`;
}

function clearHistory() {
    if (confirm("ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰ç´€éŒ„å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸï½")) {
        localStorage.removeItem("history");
        localStorage.setItem("totalSeconds", 0);
        totalSeconds = 0;
        loadData();
        showToast("å·²æ¸…ç©ºæ‰€æœ‰å­¸ç¿’ç´€éŒ„ ğŸ—‘ï¸");
    }
}

function showToast(text) {
    const toast = document.getElementById("toast");
    toast.textContent = text;
    toast.classList.add("show");
    setTimeout(() => {
        toast.classList.remove("show");
    }, 3000);
}

// åˆå§‹åŒ–
loadData();
updateDisplay();
changeAnimal();
</script>
</body>
</html>